DATABASE_URL=postgresql+asyncpg://nexusrag:nexusrag@postgres:5432/nexusrag
# Redis-backed async ingestion queue settings.
REDIS_URL=redis://redis:6379/0
INGEST_QUEUE_NAME=ingest
INGEST_MAX_RETRIES=3
INGEST_EXECUTION_MODE=queue
WORKER_HEARTBEAT_INTERVAL_S=10
WORKER_HEARTBEAT_STALE_AFTER_S=60
AUTH_ENABLED=true
AUTH_DEV_BYPASS=false
AUTH_API_KEY_HEADER=Authorization
AUTH_CACHE_TTL_S=15
AUTHZ_ABAC_ENABLED=true
AUTHZ_DEFAULT_DENY=true
AUTHZ_ADMIN_BYPASS_DOCUMENT_ACL=false
AUTHZ_MAX_POLICY_BYTES=16384
AUTHZ_MAX_POLICY_DEPTH=8
AUTHZ_SIMULATION_ENABLED=true
AUTHZ_REQUIRE_TENANT_PREDICATE=true
AUTHZ_ALLOW_WILDCARDS=false
SSO_ENABLED=true
SSO_ALLOWED_REDIRECT_HOSTS=
SSO_STATE_TTL_SECONDS=600
SSO_NONCE_TTL_SECONDS=600
SSO_CLOCK_SKEW_SECONDS=120
SSO_SESSION_TTL_HOURS=8
SSO_PUBLIC_DISCOVERY_ENABLED=false
SCIM_ENABLED=true
SCIM_TOKEN_TTL_DAYS=365
SCIM_DEFAULT_PAGE_SIZE=50
SCIM_MAX_PAGE_SIZE=200
IDENTITY_DUAL_CONTROL_REQUIRED=false
RATE_LIMIT_ENABLED=true
RL_FAIL_MODE=open
RL_KEY_RUN_RPS=1
RL_KEY_RUN_BURST=5
RL_TENANT_RUN_RPS=3
RL_TENANT_RUN_BURST=15
RL_KEY_MUTATION_RPS=2
RL_KEY_MUTATION_BURST=10
RL_TENANT_MUTATION_RPS=5
RL_TENANT_MUTATION_BURST=25
RL_KEY_READ_RPS=5
RL_KEY_READ_BURST=20
RL_TENANT_READ_RPS=15
RL_TENANT_READ_BURST=60
RL_KEY_OPS_RPS=2
RL_KEY_OPS_BURST=10
RL_TENANT_OPS_RPS=4
RL_TENANT_OPS_BURST=20
RL_REDIS_PREFIX=nexusrag:rl
BILLING_WEBHOOK_ENABLED=false
BILLING_WEBHOOK_URL=
BILLING_WEBHOOK_SECRET=
BILLING_WEBHOOK_TIMEOUT_MS=2000
COST_GOVERNANCE_ENABLED=true
COST_DEFAULT_WARN_RATIO=0.8
COST_DEFAULT_HARD_CAP_MODE=block
COST_DEGRADE_ENABLE_TTS_DISABLE=true
COST_DEGRADE_MIN_TOP_K=3
COST_DEGRADE_MAX_OUTPUT_TOKENS=512
COST_ESTIMATOR_ENABLED=true
COST_ESTIMATOR_TOKEN_CHARS_RATIO=4.0
COST_TIMESERIES_DEFAULT_DAYS=30
PERF_MODE_ENABLED=true
PERF_FAKE_PROVIDER_MODE=true
PERF_RUN_TARGET_P95_MS=1800
PERF_MAX_ERROR_RATE=0.02
PERF_SOAK_DURATION_MIN=15
PERF_REPORT_DIR=tests/perf/reports
SLA_ENGINE_ENABLED=true
SLA_DEFAULT_ENFORCEMENT_MODE=observe
SLA_DEFAULT_BREACH_WINDOWS=3
SLA_MEASUREMENT_WINDOW_SECONDS=60
SLA_ERROR_BUDGET_WINDOW_MINUTES=60
SLA_SHED_ENABLED=true
SLA_DEGRADE_TTS_DISABLE=true
SLA_DEGRADE_TOP_K_FLOOR=3
SLA_DEGRADE_MAX_OUTPUT_TOKENS=512
AUTOSCALING_ENABLED=true
AUTOSCALING_DRY_RUN=true
AUTOSCALING_EVAL_INTERVAL_SECONDS=30
AUTOSCALING_HYSTERESIS_PCT=10
AUTOSCALING_EXECUTOR=noop
ALERTING_ENABLED=true
OPERABILITY_BACKGROUND_EVALUATOR_ENABLED=true
OPERABILITY_EVAL_INTERVAL_S=30
OPERABILITY_EVAL_LOCK_TTL_S=55
OPERABILITY_WORKER_HEARTBEAT_STALE_AFTER_S=120
INCIDENT_AUTOMATION_ENABLED=true
INCIDENT_AUTO_OPEN_MIN_SEVERITY=high
OPS_NOTIFICATION_ADAPTER=noop
OPS_NOTIFICATION_WEBHOOK_URL=
NOTIFY_WEBHOOK_URLS_JSON=[]
NOTIFY_MAX_ATTEMPTS=5
NOTIFY_BACKOFF_MS=500
NOTIFY_BACKOFF_MAX_MS=15000
NOTIFY_DEDUPE_WINDOW_S=300
NOTIFY_QUEUE_NAME=notifications
NOTIFY_WORKER_POLL_INTERVAL_S=2
NOTIFY_REQUEUE_BATCH_SIZE=100
OPS_FORCED_FLAG_TTL_S=900
OPS_FORCED_WRITER_LEASE_TTL_S=30
PREFLIGHT_REQUIRE_WORKER_HEARTBEAT=false
GA_CHECKLIST_OUTPUT_DIR=var/ops
INSTRUMENTATION_DETAILED_TIMERS=true
API_DB_POOL_SIZE=20
API_DB_MAX_OVERFLOW=10
API_DB_STATEMENT_TIMEOUT_MS=15000
RUN_BULKHEAD_MAX_CONCURRENCY=10
INGEST_BULKHEAD_MAX_CONCURRENCY=4
SSE_FLUSH_INTERVAL_MS=20
EXT_CALL_TIMEOUT_MS=8000
EXT_RETRY_MAX_ATTEMPTS=2
EXT_RETRY_BACKOFF_MS=200
CB_FAILURE_THRESHOLD=5
CB_OPEN_SECONDS=30
CB_HALF_OPEN_TRIALS=2
CB_REDIS_PREFIX=nexusrag:cb
RUN_MAX_CONCURRENCY=10
INGEST_MAX_CONCURRENCY=4
KILL_RUN=false
KILL_INGEST=false
KILL_TTS=false
KILL_EXTERNAL_RETRIEVAL=false
ROLLOUT_TTS_PCT=100
ROLLOUT_EXTERNAL_RETRIEVAL_PCT=100
ROLLOUT_REDIS_PREFIX=nexusrag:rollout
SLO_AVAILABILITY_TARGET=99.9
SLO_P95_RUN_MS=3000
SLO_P95_API_MS=800
AUDIT_RETENTION_DAYS=90
UI_ACTION_RETENTION_DAYS=30
USAGE_COUNTER_RETENTION_DAYS=120
SELF_SERVE_MAX_ACTIVE_KEYS=20
AUTH_API_KEY_INACTIVE_DAYS=90
AUTH_API_KEY_INACTIVE_ENFORCED=true
IDEMPOTENCY_ENABLED=true
IDEMPOTENCY_TTL_HOURS=24
UI_CURSOR_SECRET=dev-ui-cursor-secret
RUN_SSE_HEARTBEAT_S=10
BACKUP_ENABLED=true
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=
BACKUP_SIGNING_ENABLED=true
BACKUP_SIGNING_KEY=
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE_CRON="0 2 * * *"
BACKUP_VERIFY_ON_CREATE=true
BACKUP_MAX_PARALLEL_UPLOADS=2
BACKUP_LOCAL_DIR=./backups
RESTORE_REQUIRE_SIGNATURE=true
CRYPTO_ENABLED=true
CRYPTO_PROVIDER=local_kms
CRYPTO_ENCRYPTION_ALGO=aes256gcm
CRYPTO_REQUIRE_ENCRYPTION_FOR_SENSITIVE=true
CRYPTO_DEFAULT_KEY_ALIAS=tenant-master
CRYPTO_ROTATION_INTERVAL_DAYS=90
CRYPTO_REENCRYPT_BATCH_SIZE=200
CRYPTO_MAX_CONCURRENT_REENCRYPT=2
CRYPTO_FAIL_MODE=closed
CRYPTO_AUDIT_VERBOSE=false
CRYPTO_LOCAL_MASTER_KEY=
GOVERNANCE_POLICY_ENGINE_ENABLED=true
GOVERNANCE_ARTIFACT_DIR=./governance_artifacts
GOVERNANCE_EVIDENCE_MAX_WINDOW_DAYS=90
COMPLIANCE_ENABLED=true
COMPLIANCE_DEFAULT_WINDOW_DAYS=30
COMPLIANCE_EVAL_CRON="0 3 * * *"
COMPLIANCE_BUNDLE_CRON="0 4 * * 1"
COMPLIANCE_EVIDENCE_RETENTION_DAYS=365
COMPLIANCE_FAIL_ON_CRITICAL=false
COMPLIANCE_SIGNATURE_REQUIRED=true
COMPLIANCE_EVIDENCE_DIR=var/evidence
KEYRING_MASTER_KEY=
# Set to false only for local/dev if keyring operations are intentionally disabled.
KEYRING_MASTER_KEY_REQUIRED=false
REGION_ID=ap-southeast-1
REGION_ROLE=primary
FAILOVER_ENABLED=true
FAILOVER_MODE=manual
REPLICATION_LAG_MAX_SECONDS=30
REPLICATION_HEALTH_REQUIRED=true
WRITE_FREEZE_ON_UNHEALTHY_REPLICA=true
FAILOVER_COOLDOWN_SECONDS=600
FAILOVER_TOKEN_TTL_SECONDS=300
REGION_PRIORITY=100
PEER_REGIONS_JSON=[]
FAILOVER_REDIS_PREFIX=nexusrag:failover
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=
GEMINI_MODEL=gemini-2.0-flash-001
LOG_LEVEL=INFO
DEBUG_EVENTS=false
LLM_PROVIDER=vertex
TTS_PROVIDER=none
OPENAI_API_KEY=
OPENAI_TTS_MODEL=gpt-4o-mini-tts
OPENAI_TTS_VOICE=alloy
AUDIO_BASE_URL=http://localhost:8000
